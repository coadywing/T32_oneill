% nih-t32.sty — NIH-compliant formatting for T32 grant proposals
% Follows PA-25-168 and NIH Format Attachments guidelines
%
% Requirements enforced:
%   - 11pt Arial font
%   - 0.5in margins all sides
%   - ~15pt line spacing (≤6 lines per vertical inch)
%   - No headers, footers, or page numbers
%   - Letter paper (8.5" x 11")
%   - No decorative elements

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{preamble_code/nih-t32}[2026/02/12 NIH T32 Grant Formatting]

% ---------------------------------------------------------------
% Font: Arial 11pt
% ---------------------------------------------------------------
\RequirePackage{fontspec}
\setmainfont{Arial}

% ---------------------------------------------------------------
% Page geometry: 0.5in margins, letter paper
% ---------------------------------------------------------------
\RequirePackage[
  letterpaper,
  margin=0.5in,
  headheight=0pt,
  headsep=0pt,
  footskip=0pt
]{geometry}

% ---------------------------------------------------------------
% Line spacing: ~15pt (6 lines per inch = 72pt/6 = 12pt;
% NIH says "no more than 6 lines per inch" so we use 1.2x)
% ---------------------------------------------------------------
\RequirePackage{setspace}
\setstretch{1.15}

% ---------------------------------------------------------------
% No headers, footers, or page numbers
% ---------------------------------------------------------------
\RequirePackage{fancyhdr}
\pagestyle{empty}
\fancypagestyle{plain}{\fancyhf{}\renewcommand{\headrulewidth}{0pt}}

% ---------------------------------------------------------------
% Section formatting: clean and readable
% ---------------------------------------------------------------
\RequirePackage{titlesec}

\titleformat{\section}
  {\normalfont\bfseries\fontsize{12}{14}\selectfont}
  {\thesection.}{0.5em}{}
\titlespacing*{\section}{0pt}{12pt}{4pt}

\titleformat{\subsection}
  {\normalfont\bfseries\fontsize{11}{13}\selectfont}
  {\thesubsection.}{0.5em}{}
\titlespacing*{\subsection}{0pt}{8pt}{2pt}

\titleformat{\subsubsection}
  {\normalfont\itshape\fontsize{11}{13}\selectfont}
  {\thesubsubsection.}{0.5em}{}
\titlespacing*{\subsubsection}{0pt}{6pt}{2pt}

% ---------------------------------------------------------------
% Paragraph formatting
% ---------------------------------------------------------------
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt}

% ---------------------------------------------------------------
% Lists: compact
% ---------------------------------------------------------------
\RequirePackage{enumitem}
\setlist{nosep, leftmargin=1.5em}

% ---------------------------------------------------------------
% Tables
% ---------------------------------------------------------------
\RequirePackage{booktabs}
\RequirePackage{tabularx}

% ---------------------------------------------------------------
% Bibliography: natbib for NIH-style citations
% ---------------------------------------------------------------
\RequirePackage[round, sort&compress]{natbib}
\bibliographystyle{unsrtnat}

% ---------------------------------------------------------------
% Hyperlinks: enabled but formatted for print
% ---------------------------------------------------------------
\RequirePackage[
  colorlinks=true,
  linkcolor=black,
  citecolor=black,
  urlcolor=blue,
  hidelinks
]{hyperref}

% ---------------------------------------------------------------
% Graphics
% ---------------------------------------------------------------
\RequirePackage{graphicx}

% ---------------------------------------------------------------
% Utility: conditional compilation for individual sections
% ---------------------------------------------------------------
\RequirePackage{etoolbox}
\newtoggle{compileall}
\toggletrue{compileall}
